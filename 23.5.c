#include <stdio.h>
int func(int a, int b)   //无进位加法与进位计算的结合，本质上是两个整数的加法运算
{
    if (!a) return b;
    return func((a & b) << 1, a ^ b);  //a^b计算两个数的无进位和，忽略进位的加法结果
    //(a & b) << 1 计算两个数相加产生的进位（左移 1 位表示进位到更高位）
}
int main(void)
{
    int a = 4, b = 9, c = -7;  //计算机中整数的表示通过补码实现
    //                           9 的补码（假设 32 位）：00000000 00000000 00000000 00001001；
    //                           -7 的补码：11111111 11111111 11111111 11111001（通过 7 的原码取反加 1 得到）
    //                           无进位和：a ^ b = 9 ^ (-7) = -16（补码计算结果）
    //                           进位：(a & b) << 1 = (9 & (-7)) << 1 = 8 << 1 = 16
    printf("%d\n", func(a, func(b, c)));  //内层func(9, -7)，9-7=2，无进位，因为 9 和 - 7 的二进制中没有同时为 1 的位
    //                                      外层4^2=6，100 ^ 010 = 110，无进位 
}
//运行结果如下
//6